



%###############################################################
\section{Analysis}\label{sec:Analysis}
%###############################################################
This section analyzes the time and space required for a factory and gives simulation results.


%###############################################################
\subsection{Running Time}\label{sec:runningTime}
%###############################################################
Running a factory simulation has three phases, ramp up, production, and wind down.
During the $n-1$ \emph{ramp up}  cycles, the first polyomino is being constructed one tile at a time and no polyominoes are produced.
Clever design of delays in the part hoppers ensures no unconnected tiles are released.
During \emph{production} cycles, one  polyomino is finished each cycle.
Once the first part hopper empties, the $n-1$ \emph{wind down}  cycles each produce a complete polyomino as each successive hopper empties.
 This section analyzes running time, defined as the time required for each commanded move until all tiles are stopped.  
 We assume all tiles move unit distance in unit time.
 There are two results, the \emph{construction time}, the time required to assemble a single polyomino from scratch, and
 the \emph{cycle time}, the time required during production cycles to advance all partial assemblies one cycle.
 Since a polyomino contains $n$ tiles, the \emph{construction time} during production cycles is $n \cdot$ \emph{cycle time}.
 
Cycle time is the sum of the maximum distances moved in each direction.
 As shown in Fig.~\ref{fig:timeplot}, polyominoes shaped as a $n\times 1$ row require the longest time of $4n+16$.
Polyominoes shaped as a $1\times n$ column require the least time of $2n+16$.
 Construction time therefore requires $O(n^2)$ time.
 \begin{figure}
   \centering
\begin{overpic}[width =1\columnwidth]{maxcycleplot.pdf}
\end{overpic}
\caption{\label{fig:timeplot}Cycle time plotted against number of tiles $n$.  The cycle time is the sum time to move during the $r,d,l,u$ moves each cycle. Cycle time increases linearly and is upper bounded by row parts and lower bounded by column parts.  Total construction time for a particle is $n \cdot $ cycle time.  
}
\end{figure}


%###############################################################
\subsection{Space Required}\label{sec:requiredSpace}
%###############################################################
The space required by a factory is a function of the size of individual sub-assemblies.

\begin{align}
height(n)=
\begin{cases}
\left \lceil{   \frac{n_c}{w}}\right \rceil+2((\left \lceil{\frac{n}{2}}\right \rceil+1)+(\mathbf{b}_y+1)),&\\ 
\text{for } m = l \text{ or } d, n \geq 2&\\
\left \lceil{   \frac{n_c}{w}}\right \rceil+(2(\left \lceil{\frac{n}{2}}\right \rceil+1)+\mathbf{b}_y)+3),&\\ 
\text{for } m = l \text{ or } d, C_y  < \min \mathbf{b}_y, n \geq 2&\\
\left \lceil{\frac{n_c}{w}}\right \rceil+2((\left \lceil{\frac{n}{2}}\right \rceil+1)+(\mathbf{b}_y+2)),&\\ 
\text{for } m = u \text{ or } r, n\geq 2&\\
\left \lceil{   \frac{n_c}{w}}\right \rceil+(2(\left \lceil{\frac{n}{2}}\right \rceil+1)+\mathbf{b}_y)+5),&\\ 
\text{for } m = u \text{ or } r, C_y  > \max \mathbf{b}_y, n \geq 2&\\
\end{cases}
\end{align}



\begin{equation}
(hopper+delays)_{width}=w+(2\left \lceil{n/2}\right \rceil+8),  n \geq 2
\end{equation}

\begin{align}
width(n)=
\begin{cases}
(hopper+delays)_{width}+(\mathbf{b}_x-column_{loc}),&\\ 
\text{for } m = d \text{ and } \mathbf{b}_x < (hopper+delays)_{width}&\\
\mathbf{b}_x + 1,&\\ 
\text{for } m = d \text{ and } \mathbf{b}_x \geq (hopper+delays)_{width}&\\
(hopper+delay)_{width},&\\ 
\text{for } m \neq d  \text{ and } \mathbf{b}_x < (hopper+delays)_{width}&\\
\mathbf{b}_x + 3,&\\ 
\text{for } m \neq d \text{ and } \mathbf{b}_x \geq (hopper+delays)_{width}&\\
\end{cases}
\end{align}

The first sub-assembly is constructed separately and it does not have any delay.
Beginning from the second sub-assembly, height can be computed as a function of number of copies $n_c$ of the polyomino, width of the hopper $w$, position of the sub-assembly $n$, and the rows of the sub-assembled polyomino $\mathbf{b}_y$.
The width of the sub-assembly can be calculated similarly. 
If the length of partially assembled polyomino is greater than the length of hopper and delays then width depends on $\mathbf{b}_x$. 
If a tile is added to a sub-assembled polyomino using a down move, width also depends on the location of the column $column_{loc}$ to which the tile is added.  

Because a factory requires $O(n)$ rows and $O(n)$ columns, the total requires space is $O(n^2)$.
As shown in Fig.~\ref{fig:sizeplot}, the required size is  upper bounded by column-shaped polynominos and lower bounded by row-shaped polyominos, and is $O(n^2)$.

\begin{figure}
   \centering
\begin{overpic}[width =1\columnwidth]{facsizeplot1.pdf}
\end{overpic}
\caption{\label{fig:sizeplot}
Factory size grows quadratically with the number of tiles, and is upper bounded by column-shaped polynominos and lower bounded by row-shaped polyominos.
}
\end{figure}


%###############################################################
\subsection{Simulation Results}\label{sec:simResults}
%###############################################################

Algorithms  \ref{alg:FindBuildPath} through \ref{alg:FactoryAddTile}  were coded in {\sc Matlab} and are available at \cite{Manzoor2017gitAssemply}.  








